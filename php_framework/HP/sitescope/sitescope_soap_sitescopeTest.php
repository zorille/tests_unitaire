<?php
/**
 * Generated by PHPUnit_SkeletonGenerator 1.2.1 on 2014-08-26 at 11:06:09.
 */
if (! defined ( '__DOCUMENT_ROOT__' )) {
	require_once $_SERVER ["PWD"] . '/prepare.php';
}
class sitescope_soap_sitescopeTest extends MockedListeOptions {
	/**
     * @var sitescope_soap_sitescope
     */
	protected $object;

	/**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
	protected function setUp() {
		ob_start ();
		$soap = $this->createMock ( "soap" );
		
		$this->object = new sitescope_soap_sitescope ( false, "sitescope_soap_sitescope" );
		$this->object->setSoapConnection ( $soap )
			->setListeOptions ( $this->getListeOption () );
	}

	/**
     * Tears down the fixture, for example, closes a network connection.
     * This method is called after a test is executed.
     */
	protected function tearDown() {
		ob_end_clean ();
	}

	/**
     * @covers sitescope_soap_sitescope::connect
     */
	public function testConnect_False() {
		$this->object->getSoapConnection ()
			->expects ( $this->any () )
			->method ( 'setCacheWsdl' )
			->will ( $this->returnSelf () );
		$this->object->getSoapConnection ()
			->expects ( $this->any () )
			->method ( 'retrouve_variables_tableau' )
			->will ( $this->returnSelf () );
		$this->object->getSoapConnection ()
			->expects ( $this->any () )
			->method ( 'connect' )
			->will ( $this->returnValue ( true ) );
		
		$this->assertFalse ( $this->object->connect ( "SIS_TEST" ) );
	}

	/**
     * @covers sitescope_soap_sitescope::retrouve_toutes_les_preferences
     */
	public function testRetrouve_toutes_les_preferences_Exception() {
		$this->object->getListeOptions ()
			->method ( 'getOption' )
			->will ( $this->returnValue ( false ) );
			$SoapClient = $this->createMock ( 'SoapClient' );
		$SoapClient->expects ( $this->any () )
			->method ( '__call' )
			->with ( 'getSiteScopeInfo' )
			->will ( $this->throwException ( new Exception ( 'EXCEP1' ) ) );
		$this->object->getSoapConnection ()
			->expects ( $this->any () )
			->method ( 'getSoapClient' )
			->will ( $this->returnValue ( $SoapClient ) );
		
		$this->expectException(Exception::class);
        $this->expectExceptionMessage( '(sitescope_soap_sitescope) EXCEP1' );
		$this->object->retrouve_toutes_les_preferences ();
	}

	/**
	 * @covers sitescope_soap_sitescope::retrouve_toutes_les_preferences
	 */
	public function testRetrouve_toutes_les_preferences_True() {
		$this->object->getListeOptions ()
			->method ( 'getOption' )
			->will ( $this->returnValue ( false ) );
			$SoapClient = $this->createMock ( 'SoapClient' );
		$SoapClient->expects ( $this->any () )
			->method ( '__call' )
			->will ( $this->returnValue ( array (
				"DATA1",
				"DATA2" 
		) ) );
		$this->object->getSoapConnection ()
			->expects ( $this->any () )
			->method ( 'getSoapClient' )
			->will ( $this->returnValue ( $SoapClient ) );
		
		$this->assertTrue ( $this->object->retrouve_toutes_les_preferences () );
	}
}
